# modules/home/fusuma/default.nix
# ==============================================================================
# Fusuma Touchpad Gesture Configuration
# ==============================================================================
{ config, pkgs, lib, ... }:
{
  # =============================================================================
  # Service Configuration
  # =============================================================================
  services.fusuma = {
    enable = true;
    package = pkgs.fusuma;
    
    # =============================================================================
    # Required Packages
    # =============================================================================
    extraPackages = with pkgs; [
      coreutils
    ];
    # =============================================================================
    # Gesture Settings
    # =============================================================================
    settings = {
      # ---------------------------------------------------------------------------
      # Sensitivity Settings
      # ---------------------------------------------------------------------------
      threshold = {
        swipe = 0.7;
        pinch = 0.3;
      };
      # ---------------------------------------------------------------------------
      # Timing Settings
      # ---------------------------------------------------------------------------
      interval = {
        swipe = 0.6;
        pinch = 1.0;
      };
      # ---------------------------------------------------------------------------
      # Gesture Mappings
      # ---------------------------------------------------------------------------
      swipe = {
        "3" = {
          right = {
            sendkey = ["LEFTCTRL+TAB" "LEFTCTRL+PAGEDOWN"];
            threshold = 0.6;
          };
          left = {
            sendkey = ["LEFTCTRL+LEFTSHIFT+TAB" "LEFTCTRL+PAGEUP"];
            threshold = 0.6;
          };
        };
      };
    };
  };
}
